package all;

import java.util.*;

public class Problem3ArithmeticExpression {

	public static void main(String[] args) {
        try {
            String expression = readExpression();

            int[] numbers = extractNumbers(expression);
            char[] operators = ExtractOperators(expression);

            //use a struct to easily pass and return the expression to and from functions
            ParsedExpression parsedExp;
            parsedExp.numbers = numbers;
            parsedExp.operators = operators;

            //calculate all the multiplications and divisions. The function will return ParsedExpression only with
            //pluses and minuses. Will throw exception if there is division by 0.
            parsedExp = CalculateMultiplicationAndDivisionFirst(parsedExp);

            int result = CalculateExpressionWithPlusesAndMinusesOnly(parsedExp);
            Console.WriteLine("{0} = {1}", expression, result);
        }
        //specify exception we should catch
        catch (FormatException ex)
        {
            Console.WriteLine("Invalid expression!");
        }
        //be prepared if we get to divide by 0
        catch (DivideByZeroException)
        {
            Console.WriteLine("Division by zero.");
        }
    }

	private static int[] extractNumbers(String expression) {
		//add signs for multiplication and division
        String[] splitResult = expression.split("[+-*/]");
        List<Integer> numbers = new ArrayList<Integer>();
        for (String number : splitResult) {
              numbers.add(Integer.parseInt(number));
        }
        return numbers.toArray(new Integer[numbers.size()]);
	}

	private static String readExpression() {
		System.out.println("Enter expression:");
		Scanner input = new Scanner(System.in);
		String expression = input.nextLine();
		input.close();
		return expression;

	}

}
