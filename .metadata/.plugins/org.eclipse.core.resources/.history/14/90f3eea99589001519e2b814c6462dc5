package all;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.UnsupportedEncodingException;
import java.util.*;

public class Problem4MainMusicalCompany {

	// Create a sample test to check if the classes are working properly with its       
    // methods

	public static void main(String[] args) {
		Scanner reader = null;
		try {
			reader =  new Scanner(new File("MusicCompany.txt"), "windows-1251");
	
	        List<Problem4Song> songs = new ArrayList<Problem4Song>();
	        List<Problem4Album> albums = new ArrayList<Problem4Album>();
	        List<Problem4Singer> singers = new ArrayList<Problem4Singer>();
	
	        String line = "";
	        String[] elements;
	        for (int i = 0; i < 2; i++) {
	        	while (true) {
	        		line = reader.nextLine();
	        		
	                if (line.equals("!")) {
	                	break;
	                }
	                
	                elements = line.split("-");
	                songs.add(new Problem4Song(elements[0], Integer.parseInt(elements[1])));
	            }
	
	                  line = reader.ReadLine();
	                  elements = line.Split('-');
	                  albums.Add(new Album(elements[0], elements[1], 
	                      int.Parse(elements[2]), int.Parse(elements[3])));
	
	                  line = reader.ReadLine();
	                  elements = line.Split('-');
	                  singers.Add(new Singer(elements[0], elements[1]));
	
	                  int counter = 0;
	                  foreach (var song in songs)
	                  {
	                      albums[counter].AddSongs(song);
	                  }
	
	                  singers[counter].AddAlbum(albums[counter]);
	                  counter++;
	                  songs.Clear();
	              }
	              line = reader.ReadLine();
	              elements = line.Split('-');
	              MusicComapny virginiaRecors = 
	                      new MusicComapny(elements[0], elements[1], elements[2]);
	
	              foreach (var singer in singers)
	              {
	                  virginiaRecors.AddArtist(singer);
	              }
	              Console.WriteLine(virginiaRecors.ToString());
	          }
		} catch (FileNotFoundException fnfe) {
			System.err.println(fnfe.getMessage());
		} catch (UnsupportedEncodingException e1) {
			e1.printStackTrace();
		} finally {
			if (!(reader == null)) {
				reader.close();
			}
			if (!(writer == null)) {
				writer.close();
			}
		}
	}
}
