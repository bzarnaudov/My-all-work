package all;

import problem3FileSystem.*;
import java.util.*;

public class Problem4RealFileSystem {

	public static void main(String[] args) {
		Scanner input = new Scanner(System.in);
		String rootDirectory = input.nextLine();

		DirectoryInfo rootDirInfo = new DirectoryInfo(rootDirectory);
		var rootDir = new FileSystem.Directory(rootDirInfo.Name,
				rootDirInfo.LastWriteTime);
		Device fileSystem = new Device("File System", rootDir);
		fileSystemTraversal(rootDirInfo, rootDir);

		Console.WriteLine(fileSystem);

	}

	static void fileSystemTraversal(DirectoryInfo currentDirectoryInfo, FileSystem.Directory currentDirectory) {
        foreach (var file in currentDirectoryInfo.GetFiles()) {
            currentDirectory.AddFile(new BinaryFile(file.Name, file.CreationTime, file.LastWriteTime, null));
        }

        foreach (var di in currentDirectoryInfo.GetDirectories()) {
            var dir = new FileSystem.Directory(di.Name, di.LastWriteTime);
            currentDirectory.AddDirectory(dir);
            FileSystemTraversal(di, dir);
        }
    }
}
