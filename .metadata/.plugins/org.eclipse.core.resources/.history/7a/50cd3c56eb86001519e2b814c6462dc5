package all;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.PrintStream;
import java.util.*;

public class Problem1ValidEmails {

	private static int usernameValid(String username) {
		String regex = new String("^[A-Za-z_]+$");
		if (!regex.matches(username)) {
			return -1;
		}
		return 0;
	}

	private static int domainValid(String domain) {
		String regex = new String("^[a-z]+$");
		if (!regex.matches(domain)) {
			return -1;
		}
		if (domain.length() < 2 || domain.length() > 4) {
			return -1;
		}
		return 0;
	}

	private static int hostValid(String host) {
		String regex = new String("^[a-z]+$");
		if (!regex.matches(host)) {
			return -1;
		}
		return 0;
	}

	private static int validationOfEmail(String email) {
		String[] emailElements = email.split("@.");
		String username = emailElements[0];
		String host = emailElements[1];
		String domain = emailElements[2];
		if (usernameValid(username) != 0 || hostValid(host) != 0
				|| domainValid(domain) != 0) {
			return -1;
		}
		return 0;
	}

	private static int validationOfName(String name) {
		String regex = new String("^[A-Za-z]+$");
		if (!regex.matches(name)) {
			return -1;
		}
		return 0;
	}

	public static void main(String[] args) {
        Scanner reader = null;
        PrintStream writer = null;

        try {
        	reader = new Scanner(new File("test.001.in.txt"), "windows-1251");
            writer = new PrintStream(new File("test.001.out.txt"), "windows-1251");
            String line = "";
            while (true) {
            	line = reader.nextLine();
                if (line == null) {
                        break;
                }

                String[] elements = line.split(" ");
                String firstName = elements[0];
                String secondName = elements[1];
                String email = elements[2];
                if (validationOfName(firstName) != 0
                		|| validationOfName(secondName) != 0) {
                	System.out.println("Error in names");
                	continue;
                }
                try {
                	if (validationOfEmail(email) != 0) {
                		System.out.println("Error in email syntax");
                        continue;
                    }
                } catch (Exception e) {
                	System.out.println("Error");
                	continue;
                }     
                  
                writer.println(firstName + " " + secondName + " " + email);
            }
        } catch (FileNotFoundException fnfe) {
        	System.out.println("File mails.txt does not exist");
        	System.err.println(fnfe.getMessage());
        } catch (Exception e) {
        	System.out.println("Error");
        } finally {
        	if (!(reader == null)) {
        		reader.close();
        	}
        	if (!(writer == null)) {
            	writer.close();
        	}
        }
    }
}
